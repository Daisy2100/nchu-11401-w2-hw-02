# 房價預測多元線性回歸分析報告

## 學生資訊
- **學號**: 114056036
- **課程**: NCHU 11401 W2
- **作業**: HW02 - 多元線性回歸分析
- **日期**: 2025年10月22日

---

## 1. Business Understanding (商業理解)

### 1.1 專案背景
房地產市場是經濟的重要組成部分，房價預測對於多方利益相關者具有重要意義：
- **買家**: 評估房屋是否物有所值
- **賣家**: 合理定價策略
- **投資者**: 識別投資機會
- **金融機構**: 貸款風險評估

### 1.2 商業目標
建立一個準確、可解釋的多元線性回歸模型來預測房價，主要目標包括：
1. 提供房價的量化預測
2. 識別影響房價的關鍵因素
3. 建立可信的預測區間

### 1.3 成功標準
- **準確性**: R² > 0.15 (考慮到房價影響因素的複雜性)
- **可解釋性**: 提供清晰的特徵重要性分析
- **穩定性**: 預測區間覆蓋率接近 95%

---

## 2. Data Understanding (資料理解)

### 2.1 資料來源
- **資料集名稱**: House Price Dataset
- **來源**: [Kaggle - House Price Dataset](https://www.kaggle.com/datasets/juhibhojani/house-price/discussion?sort=hotness)
- **資料規模**: 187,531 筆資料，21 個特徵
- **時間範圍**: 印度房地產市場資料

### 2.2 資料特徵描述
| 特徵名稱 | 資料型態 | 描述 | 缺失值比例 |
|----------|----------|------|------------|
| Price (in rupees) | 數值型 | 房價 (目標變數) | 9.4% |
| location | 類別型 | 地理位置 | 0% |
| Carpet Area | 文字型 | 地毯面積 | 43.0% |
| Status | 類別型 | 房屋狀態 | 0.3% |
| Floor | 文字型 | 樓層資訊 | 3.8% |
| Transaction | 類別型 | 交易類型 | 0.04% |
| Furnishing | 類別型 | 裝潢狀況 | 1.5% |
| facing | 類別型 | 朝向 | 37.5% |
| overlooking | 類別型 | 景觀 | 43.4% |
| Bathroom | 文字型 | 浴室數量 | 0.4% |
| Balcony | 文字型 | 陽台數量 | 26.1% |
| Car Parking | 文字型 | 停車位 | 55.1% |
| Ownership | 類別型 | 所有權類型 | 34.9% |
| Super Area | 文字型 | 總面積 | 57.4% |

### 2.3 資料品質分析
- **優點**: 資料量充足，涵蓋房屋的多個重要面向
- **挑戰**: 部分重要特徵 (如面積) 缺失值較多
- **目標變數分布**: 右偏分布，存在極值

---

## 3. Data Preparation (資料準備)

### 3.1 資料清理策略
1. **移除無用特徵**: 刪除 Index, Title, Description 等非預測性特徵
2. **異常值處理**: 使用 1%-99% 分位數範圍移除極端值
3. **缺失值處理**: 
   - 目標變數: 完全移除
   - 數值特徵: 中位數填補
   - 類別特徵: "Unknown" 填補

### 3.2 特徵工程
1. **數值提取**: 從文字中提取數值 (如面積、樓層、設施數量)
2. **類別編碼**: Label Encoding 處理類別變數
3. **新特徵創建**:
   - 面積比例 (Carpet Area / Super Area)
   - 設施總數 (浴室 + 陽台數量)
   - 位置聚類 (保留前20個熱門地區)

### 3.3 資料清理結果
- **原始資料**: 187,531 筆
- **清理後資料**: 166,894 筆 (保留 89.0%)
- **最終特徵**: 15 個工程特徵

---

## 4. Modeling (建模)

### 4.1 特徵選擇
使用 SelectKBest (F-statistics) 方法選擇最重要的特徵：

| 排名 | 特徵名稱 | F-統計量 | 重要性說明 |
|------|----------|----------|------------|
| 1 | Bathroom | 23,713.27 | 浴室數量是房價的強指標 |
| 2 | Total_Facilities | 22,290.01 | 總設施數量反映房屋品質 |
| 3 | location_Encoded | 8,545.95 | 地理位置是房價核心因素 |
| 4 | Balcony | 8,508.84 | 陽台數量影響居住品質 |
| 5 | Floor_Number | 5,882.87 | 樓層高度影響房價 |

### 4.2 模型比較
測試了三種線性回歸模型：

| 模型 | 訓練集 R² | 測試集 R² | RMSE | 交叉驗證 R² |
|------|-----------|-----------|------|-------------|
| Linear Regression | 0.2019 | 0.2025 | 3,558.72 | 0.2017±0.0050 |
| Ridge Regression | 0.2019 | 0.2025 | 3,558.72 | 0.2017±0.0050 |
| Lasso Regression | 0.2019 | 0.2025 | 3,558.72 | 0.2017±0.0050 |

**最佳模型**: Lasso Regression (R² = 0.2025)

### 4.3 模型解釋
- **R² = 0.2025**: 模型能解釋約 20% 的房價變異
- **穩定性**: 訓練集和測試集性能一致，無明顯過擬合
- **特徵重要性**: 浴室數量和設施總數是最重要的預測因子

---

## 5. Evaluation (評估)

### 5.1 模型性能指標
- **測試集 R²**: 0.2025
- **測試集 RMSE**: 3,558.72 盧比
- **交叉驗證**: 0.2017 ± 0.0050 (表現穩定)

### 5.2 預測區間分析
- **95% 預測區間覆蓋率**: 94.8% (接近理論值)
- **中位數絕對百分比誤差**: 約 30-40%

### 5.3 模型診斷
1. **殘差分析**: 殘差分布接近常態，但存在輕微的異方差性
2. **預測 vs 實際**: 在低價房屋預測較準確，高價房屋誤差較大
3. **特徵重要性**: 硬體設施 (浴室、陽台) 比軟體因素 (裝潢) 更重要

---

## 6. Deployment (部署)

### 6.1 模型應用建議
1. **初步估價工具**: 適用於房地產業者快速評估
2. **投資篩選**: 識別可能被低估的房產
3. **貸款評估**: 銀行可用於風險初評

### 6.2 使用限制
1. **市場變化**: 模型需定期更新以反映市場趨勢
2. **特殊情況**: 無法處理獨特房產 (如歷史建築)
3. **地區限制**: 主要適用於類似的印度房地產市場

### 6.3 改進建議
1. **更多特徵**: 加入經濟指標、交通便利性等
2. **非線性模型**: 嘗試隨機森林、XGBoost 等
3. **時間序列**: 考慮房價的時間趨勢

---

## GPT 輔助內容

### GPT 輔助內容
本專案在資料探索、程式架構、特徵工程、模型選擇、視覺化設計及技術除錯（例如 GitHub 大檔案問題）等多個環節，使用了 AI 協助（相關對話紀錄請見 `log.md`）。重點整理如下：

- 資料來源與檢視：確認 Kaggle 資料的欄位與缺失情形（約 21 個特徵、187,531 筆）。
- CRISP-DM 流程：依 Business Understanding → Data Understanding → Data Preparation → Modeling → Evaluation → Deployment 完成分析流程。
- 資料清理：以正規表示式抽取文字中的數值、將少數熱門地區保留並將其他群組為 "Other"、使用 1%-99% 分位數或 IQR 處理極端值。
- 特徵工程與選擇：創建衍生特徵（設施總數、面積比例等），並以 SelectKBest(f_regression) 與 RFE 做篩選。
- 建模策略：比較 Linear / Ridge / Lasso，嘗試對數轉換及正則化；使用標準化與交叉驗證評估模型穩定性。
- 成果摘要：基礎線性回歸 R² ≈ 0.15，增強版（含嚴格處理與 Lasso）測試 R² 提升至 ≈ 0.2025，95% 預測區間覆蓋率約 94.8%。

> 詳細逐字對話請參考專案根目錄的 `log.md`。

---


## NotebookLM 研究摘要

已於專案根目錄新增精簡版摘要檔 `NotebookLM_summary.md`（供上傳至 NotebookLM 使用），內容摘自對不動產估價制度與 CAMA 案例的重點整理，包含制度問題、CAMA 優勢、模型選擇權衡與人機協作治理建議等要點。

---

## 網路主流解法比較

### 1. Kaggle 競賽解法
- **特色**: 通常使用集成學習方法 (Random Forest, XGBoost)
- **優勢**: 預測準確度更高
- **劣勢**: 模型可解釋性較差

### 2. 學術研究方法
- **特色**: 重視統計假設驗證和模型解釋
- **優勢**: 理論基礎扎實，結果可信度高
- **劣勢**: 可能犧牲一些預測準確度

### 3. 產業應用方案
- **特色**: 平衡準確度和可解釋性
- **優勢**: 實用性強，易於部署
- **劣勢**: 可能過於簡化複雜關係

### 本專案定位
本專案採用了平衡的方法：
- 保持線性回歸的可解釋性
- 通過特徵工程提升性能
- 提供完整的不確定性分析

---

## 結論

### 主要成果
1. **成功建立**: 多元線性回歸模型 (R² = 0.2025)
2. **識別關鍵因素**: 浴室數量、設施總數、地理位置是主要預測因子
3. **提供預測區間**: 95% 覆蓋率達 94.8%
4. **完整流程**: 遵循 CRISP-DM 完整資料科學流程

### 模型實用性
- **適用場景**: 房地產初步估價、投資決策支援
- **準確度**: 中等水準，適合快速篩選和初評
- **穩定性**: 交叉驗證顯示模型穩定可靠

### 未來改進方向
1. **資料擴充**: 收集更多高品質特徵
2. **模型升級**: 嘗試非線性和集成方法
3. **實時更新**: 建立持續學習機制

---

## 附件清單

### 程式檔案
- `114056036_hw2.py` - 基礎版分析程式
- `114056036_hw2.ipynb` - Jupyter Notebook 版本
- `114056036_hw2_enhanced.py` - 增強版分析程式

### 模型檔案
- `best_house_price_model.pkl` - 最佳訓練模型
- `best_feature_scaler.pkl` - 特徵標準化器
- `best_feature_selector.pkl` - 特徵選擇器

### 結果檔案
- `enhanced_model_results.txt` - 模型評估結果
- `enhanced_model_analysis.png` - 綜合分析圖表
- `model_evaluation_plots.png` - 基礎評估圖表
- `prediction_intervals.png` - 預測區間圖表

### 文檔
- `README.md` - 專案說明文件
- 本報告 PDF 檔案

---

*本報告完成於 2025年10月22日*